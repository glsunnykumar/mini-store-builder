<div class="store-container" *ngIf="!loading; else loadingState">

<!-- ðŸ”¹ STORE NAVBAR -->
<header class="store-header">
  <div class="logo-section">
    <mat-icon>storefront</mat-icon>
    <span class="brand-name">Mini Store</span>
  </div>

  <!-- ðŸ”¹ Search Bar -->
  <div class="search-container">
    <mat-icon class="search-icon">search</mat-icon>
    <input
      type="text"
      placeholder="Search products..."
      [(ngModel)]="searchQuery"
      (input)="onSearchChange()"
    />
  </div>

  <!-- ðŸ”¹ Cart Icon -->
  <div class="cart-section">
    <button  mat-fab color="primary" class="floating-cart" (click)="openCart()">
      <mat-icon>shopping_cart</mat-icon>
     <span *ngIf="cartCount > 0" class="badge">{{ cartCount }}</span>
    </button>
  </div>
</header>


  <!-- ðŸ”¹ Category Slider -->
  <div class="category-slider">
    <button
      mat-button
      class="category-item all"
      [class.active]="!selectedCategoryId"
      (click)="filterByCategory(null)"
    >
      <mat-icon>grid_view</mat-icon> All
    </button>

    <button
      mat-button
      *ngFor="let cat of categories"
      class="category-item"
      [class.active]="selectedCategoryId === cat.id"
      (click)="filterByCategory(cat.id)"
    >
      <img *ngIf="cat.coverImage" [src]="cat.coverImage" alt="{{ cat.name }}" />
      <span>{{ cat.name }}</span>
    </button>
  </div>

  <!-- ðŸ”¹ Product Grid -->
  <div class="product-grid" *ngIf="filteredProducts.length > 0; else noProducts"
    
    >
    <mat-card class="product-card" *ngFor="let p of filteredProducts"
      (click)="openProductDetail(p)"

    >
      <img [src]="p.imageUrl" alt="{{ p.name }}" class="product-image" />
      <div class="product-info">
        <h3>{{ p.name }}</h3>
        <p>{{ p.description | slice:0:60 }}{{ p.description.length > 60 ? 'â€¦' : '' }}</p>
        <div class="product-footer">
          <span class="price">â‚¹{{ p.price }}</span>
          <button mat-icon-button color="primary" title="Add to Cart">
            <mat-icon>shopping_cart</mat-icon>
          </button>
        </div>
      </div>
    </mat-card>
  </div>

</div>

<!-- ðŸ”¹ Empty State -->
<ng-template #noProducts>
  <div class="empty">
    <mat-icon>search_off</mat-icon>
    <p>No products found for this category.</p>
  </div>
</ng-template>

<!-- ðŸ”¹ Loader -->
<ng-template #loadingState>
  <div class="loading">
    <mat-icon>hourglass_empty</mat-icon>
    <p>Loading store...</p>
  </div>
</ng-template>
